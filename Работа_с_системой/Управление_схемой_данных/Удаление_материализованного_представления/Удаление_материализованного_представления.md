---
layout: default
title: Удаление материализованного представления
nav_order: 9
parent: Управление схемой данных
grand_parent: Работа с системой
has_children: false
---

# Удаление материализованного представления

Чтобы удалить [материализованное представление](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Материализованное_представление/Материализованное_представление.md) 
и его данные, выполните запрос [DROP MATERIALIZED VIEW](../../../Справочная_информация/Запросы_SQLplus/DROP_MATERIALIZED_VIEW/DROP_MATERIALIZED_VIEW.md) 
(см. пример [ниже](#пример-запроса-на-удаление-материализованного-представления)).

При успешном выполнении запроса все данные материализованного представления удаляются из указанных 
[СУБД](../../../Введение/Поддерживаемые_СУБД_хранилища/Поддерживаемые_СУБД_хранилища.md) [хранилища](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Хранилище_данных/Хранилище_данных.md). 
Материализованное представление удаляется из [логической схемы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md) 
при удалении данных представления из последней СУБД (см. секцию `DATASOURCE_TYPE` в разделе [DROP MATERIALIZED VIEW](../../../Справочная_информация/Запросы_SQLplus/DROP_MATERIALIZED_VIEW/DROP_MATERIALIZED_VIEW.md)).

Чтобы проверить наличие материализованного представления, используйте любой из способов:
*   Выполните [запрос метаданных](../Запрос_метаданных_логической_схемы/Запрос_метаданных_логической_схемы.md)
    логической схемы данных (вместо `DB_NAME` и `MATERIALIZED_VIEW_NAME` подставьте имя логической БД и имя
    представления в верхнем регистре; см. пример [ниже](#пример-запроса-на-проверку-наличия-материализованного-представления)):
    ```sql
    SELECT * FROM INFORMATION_SCHEMA.tables
    WHERE table_schema = '<DB_NAME>' AND
      ((table_name = '<MATERIALIZED_VIEW_NAME>' AND table_type = 'BASE TABLE') OR
       (table_name = 'SYS_<MATERIALIZED_VIEW_NAME>' AND table_type = 'VIEW'))
    ```
    Если материализованное представление существует, запрос возвращает две записи, иначе — ноль записей.
*   Выполните запрос [SELECT](../../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md) к материализованному
    представлению, например:
    ```sql
    SELECT * FROM <db_name>.<materialized_view_name> LIMIT 5
    ```
    Если материализованное представление существует, запрос возвращает от ноля до пяти записей (в зависимости от
    содержимого представления), иначе — исключение `Entity <materialized_view_name> does not exist`.
*   Проверьте дерево объектов в вашем SQL-клиенте.
    <br>Если материализованное представление существует, оно присутствует среди объектов логической БД в SQL-клиенте,
    иначе — отсутствует среди объектов логической БД.

## Примеры

### Пример запроса на удаление материализованного представления

```sql
-- выбор базы данных sales по умолчанию
USE sales

-- удаление представления sales_and_stores
DROP MATERIALIZED VIEW sales_and_stores
```

### Пример запроса на проверку наличия материализованного представления

```sql
-- проверка наличия материализованного представления sales_and_stores
SELECT
  CASE
    WHEN count(*) > 1 THEN 'представление существует'
    ELSE 'представление не существует'
  END
FROM INFORMATION_SCHEMA.tables
WHERE table_schema = 'SALES' AND 
    ((table_name = 'SALES_AND_STORES' AND table_type = 'BASE TABLE') OR 
     (table_name = 'SYS_SALES_AND_STORES' AND table_type = 'VIEW'))
```