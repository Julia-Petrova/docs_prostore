---
layout: default
title: Создание логического представления
nav_order: 5
parent: Управление схемой данных
grand_parent: Работа с системой
has_children: false
---

# Создание логического представления

Логическое представление можно создать на основе данных одной или нескольких [логических таблиц](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_таблица/Логическая_таблица.md).

Чтобы создать [логическое представление](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическое_представление/Логическое_представление.md) 
в [логической БД](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md), 
выполните запрос [CREATE VIEW](../../../Справочная_информация/Запросы_SQLplus/CREATE_VIEW/CREATE_VIEW.md) 
(см. пример [ниже](#пример-запроса-на-создание-логического-представления)). При успешном выполнении запроса логическое представление появляется в 
[логической схеме данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_схема_данных/Логическая_схема_данных.md).

Чтобы проверить наличие логического представления, используйте любой из способов:
*   Выполните [запрос метаданных](../Запрос_метаданных_логической_схемы/Запрос_метаданных_логической_схемы.md) 
    логической схемы данных (вместо `DB_NAME` и `VIEW_NAME` подставьте имя логической БД и имя
     логического представления в верхнем регистре; см. пример [ниже](#пример-запроса-на-проверку-наличия-логического-представления)):
    ```sql
    SELECT * FROM INFORMATION_SCHEMA.tables
    WHERE table_schema = '<DB_NAME>' AND (table_name = '<VIEW_NAME>' AND table_type = 'VIEW')
    ```
    Если логическое представление существует, запрос возвращает одну запись, иначе — ноль записей. 
*   Выполните запрос [SELECT](../../../Справочная_информация/Запросы_SQLplus/SELECT/SELECT.md) 
    к логическому представлению, например:
    ```sql
    SELECT * FROM <db_name>.<view_name> LIMIT 5
    ```
    Если логическое представление существует, запрос возвращает от ноля до пяти записей (в зависимости от 
    содержимого представления), иначе — исключение `Entity <view_name> does not exist`.
*   Проверьте дерево объектов в вашем SQL-клиенте (см. рисунок [ниже](#img_view_in_object_tree)).
    <br>Если логическое представление, оно присутствует среди объектов логической БД в SQL-клиенте,
    иначе — отсутствует среди объектов логической БД.

На рисунке ниже показан фрагмент дерева объектов SQL-клиента, которое содержит логическое представление 
`stores_by_sold_products`.

<a id="img_view_in_object_tree"></a>
![](Логическое_представление.png){:height="50%" width="50%"}
{: .figure-center}
*Логическое представление в дереве объектов*
{: .figure-caption-center}

## Примеры

### Пример запроса на создание логического представления

```sql
-- выбор базы данных sales по умолчанию
USE sales

-- создание представления stores_by_sold_products
CREATE VIEW stores_by_sold_products AS
  SELECT store_id, SUM(product_units) AS product_amount
  FROM sales.sales
  GROUP BY store_id
  ORDER BY product_amount DESC
  LIMIT 30
```

### Пример запроса на проверку наличия логического представления

```sql
-- проверка наличия логического представления stores_by_sold_products
SELECT
  CASE
    WHEN count(*) > 0 THEN 'представление существует'
    ELSE 'представление не существует'
  END
FROM INFORMATION_SCHEMA.tables
WHERE table_schema = 'SALES' AND (table_name = 'STORES_BY_SOLD_PRODUCTS' AND table_type = 'VIEW')
```