---
layout: default
title: ROLLBACK DELTA
nav_order: 29
parent: Запросы SQL+
grand_parent: Справочная информация
has_children: false
has_toc: false
---

# ROLLBACK DELTA

Запрос позволяет откатить горячую (открытую) [дельту](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Дельта/Дельта.md) — 
отменить все изменения горячей дельты и вернуть [логическую базу данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Логическая_база_данных/Логическая_база_данных.md)
в состояние, актуальное на момент последней закрытой дельты. При откате отменяются все операции записи горячей
дельты: как завершенные, так и еще выполняемые.

Перед выполнением запроса необходимо определить логическую базу данных, [используемую по умолчанию](../../../Работа_с_системой/Другие_функции/Определение_логической_БД_по_умолчанию/Определение_логической_БД_по_умолчанию.md),
если она еще не определена.

**Примечание:** откат закрытой дельты невозможен.

Откат горячей дельты выполняется в следующем порядке:
1. Останавливаются все выполняемые операции записи. Операции останавливаются асинхронно, и система периодически 
   проверяет, остались ли выполняемые операции записи. Проверка запускается раз в интервал, заданный 
   в [конфигурации](../../../Эксплуатация/Конфигурация/Конфигурация.md) с помощью параметра
   `rollbackStatusCallsMS`.
2. Отменяются все операции записи горячей дельты: остановленные, завершенные успешно и завершенные с ошибкой. 
   При этом отменяются все связанные изменения данных.
3. Горячая дельта удаляется из [сервисной базы данных](../../../Обзор_понятий_компонентов_и_связей/Основные_понятия/Сервисная_база_данных/Сервисная_база_данных.md),
   и зарезервированный ранее номер горячей дельты освобождается.

В ответе возвращается:
*   объект ResultSet c одной записью, содержащей номер последней закрытой дельты, при успешном выполнении 
    запроса;
*   исключение при неуспешном выполнении запроса.

## Синтаксис

```sql
ROLLBACK DELTA
```